import axios from 'axios'
import express from 'express'
import session from 'telegraf/session'
import {Telegraf} from 'telegraf'
import { BOT_TOKEN, VK_TOKEN } from './config'
import { mainMenuKeyboard } from './keyboards'
import { getAssortment, getDetailedPage } from './controllers'

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
const app = express()
// –¢–µ—Å—Ç–æ–≤—ã–π get –∑–∞–ø—Ä–æ—Å
app.get('/', (req, res) => res.send('Hello world'))
// –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –±–æ—Ç–∞
const bot = new Telegraf(BOT_TOKEN)
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ—Å—Å–∏–π
bot.use(session())

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start
bot.start(async ctx => {
    try {
        // –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–∑ vk
        const allItems = await axios.get(`https://api.vk.com/method/market.get?access_token=${VK_TOKEN}&v=5.107&owner_id=-181251548&extended=1`)
        // –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤
        ctx.session.allItems = allItems.data.response.items
        // –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–ª-–≤–∞ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤
        ctx.session.itemsCount = allItems.data.response.count
        // –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–Ω—É–∂–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–æ–∫ "–Ω–∞–∑–∞–¥/–¥–∞–ª—å—à–µ")
        ctx.session.currentPage = 1
        // –û—Ç–≤–µ—Ç –±–æ—Ç–∞
        ctx.replyWithHTML(
            '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ <b>–ß–∞–π–Ω—ã–π –ø–æ—á–∏—Ç–∞—Ç–µ–ª—å Ëå∂Â¥áÊãúËÄÖ</b>. '+
            '–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –Ω–∞—à–∏–º –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–æ–º. '+
            '–î–ª—è –Ω–∞—Å —á–∞–π - —ç—Ç–æ —Ö–æ–±–±–∏, –ø–æ—ç—Ç–æ–º—É –ø—Ä–æ–¥–∞–µ–º –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä, '+
            '–∫–æ—Ç–æ—Ä—ã–π —Å–∞–º–∏ –ø—å–µ–º –∏ –ø–æ—Å—É–¥—É, –∫–æ—Ç–æ—Ä–æ–π —Å–∞–º–∏ –ø–æ–ª—å–∑—É–µ–º—Å—è.\n\n'+
            '–í–ª–∞–¥–µ–ª–µ—Ü: <a href="http://t.me/arutemu_su">Arutemu</a>', 
            {
                disable_web_page_preview: true,
                reply_markup: mainMenuKeyboard.reply_markup
            }
        )
    } catch (e) {
        console.log(e)
        ctx.reply('–í–æ–∑–Ω–∏–∫–ª–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –Ω–µ–ø–æ–ª–∞–¥–∫–∞')
    }
})

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–∞
bot.hears('üöÄ –£—Å–ª–æ–≤–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ –æ–ø–ª–∞—Ç—ã', async ctx => {
    try {
        ctx.telegram.sendMessage(
            ctx.chat.id, 
            '<b><u>–û–ø–ª–∞—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤</u></b>\n'+
            '–î–ª—è –∑–∞–∫–∞–∑–∞ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–µ–≥–æ —Ç–æ–≤–∞—Ä–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –º–µ—Å—Ç–Ω–æ–º—É <a href="http://t.me/arutemu_su">–î–∞–π–º—ë</a>. –ù–µ —Å—Ç–æ–∏—Ç –∑–∞–±—ã–≤–∞—Ç—å —É–∫–∞–∑—ã–≤–∞—Ç—å —Å–≤–æ–∏ –ø–æ—á—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ <code>(–§.–ò.–û., –û–±–ª–∞—Å—Ç—å, –≥–æ—Ä–æ–¥, –∞–¥—Ä–µ—Å, –ø–æ—á—Ç–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å)</code>.\n\n' +
            '<i>–°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã:</i> –°–±–µ—Ä–±–∞–Ω–∫, Qiwi, –Ø–Ω–¥–µ–∫—Å –î–µ–Ω—å–≥–∏.\n\n\n' +
            '<b><u>–î–æ—Å—Ç–∞–≤–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤</u></b>\n' +
            '–î–æ—Å—Ç–∞–≤–∫–∞ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø–æ 100% –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–µ. –û—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ –ü–æ—á—Ç—ã –†–§. –í —Å—Ä–µ–¥–Ω–µ–º —ç—Ç–æ 300 —Ä—É–±, –Ω–æ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–≥–∏–æ–Ω–∞ —Ü–µ–Ω–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω—å—à–µ –∏–ª–∏ –±–æ–ª—å—à–µ. –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ –†–æ—Å—Å–∏–∏ 7-10 –¥–Ω–µ–π.',
            {
                parse_mode: 'HTML', 
                disable_web_page_preview: true, 
                reply_markup: mainMenuKeyboard.reply_markup
            }
        )
    } catch (e) {
        console.log(e)
        ctx.replyWithHTML('–£–ø—Å. –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞—á–∞—Ç—å —Å –∫–æ–º–∞–Ω–¥—ã <code>/start</code>')
    }
})

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–∞
bot.hears('üèØ –ì–ª–∞–≤–Ω–∞—è', async ctx => {
    try {
        // –§–æ—Ç–æ –ª–æ–≥–æ—Ç–∏–ø–∞ –º–∞–≥–∞–∑–∏–Ω–∞
        const teaVotaryPhoto = 'AgACAgIAAxkBAAMaXuJySbrb7WB9pI4WYQ_j76o9GXcAAuSsMRsxiRlL1Pa6TferXy5SHZqVLgADAQADAgADbQADVUgAAhoE'
        // –ó–∞–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
        const welcomeText = 
            '–ù–µ–±–æ–ª—å—à–æ–π –º–∞–≥–∞–∑–∏–Ω—á–∏–∫ <i>–î–∞–π–º—ë</i> –Ω–∞ –ø–µ–Ω—Å–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–Ω—è–ª—Å—è —á–∞–π–Ω—ã–º –¥–µ–ª–æ–º. –†–∞—Å—Å–∫–∞–∑—ã–≤–∞—é –ø—Ä–æ –ø–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —á–∞–π–Ω–æ–≥–æ –≥—É–Ω—Ñ—É, —Å–æ–∑–∏–¥–∞—é —Ö–æ–∫–∫—É, –¥–µ–ª—é—Å—å —á–∞–µ–º –∏ —á–∞–π–Ω–æ–π —É—Ç–≤–∞—Ä—å—é –ø–æ –†–æ—Å—Å–∏–∏.\n\n'+
            '–í–ª–∞–¥–µ–ª–µ—Ü: <a href="http://t.me/arutemu_su">Arutemu</a>\n'+
            '–ú–∞–≥–∞–∑–∏–Ω –≤ vk: <a href="https://vk.com/tea_votary">–ß–∞–π–Ω—ã–π –ø–æ—á–∏—Ç–∞—Ç–µ–ª—å Ëå∂Â¥áÊãúËÄÖ</a>\n\n'+
            '–í –¥—É—à–µ —Ç—Ä–µ–≤–æ–≥–∞.\n'+
            '–†–µ—à–∏–ª –æ—Ç–≤–µ–¥–∞—Ç—å —á–∞—é.\n'+
            '–°–ø–æ–∫–æ–µ–Ω –±—É—Å–∏'

        // –û—Ç–≤–µ—Ç –±–æ—Ç–∞, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –∏ —Ç–µ–∫—Å—Ç
        await ctx.telegram.sendPhoto(
            ctx.chat.id, 
            teaVotaryPhoto,
            {
                caption: `${welcomeText}`,
                parse_mode: 'HTML',
                disable_web_page_preview: true
            }
        )
    } catch(e) {
        console.log(e)
        ctx.replyWithHTML('–£–ø—Å. –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞—á–∞—Ç—å —Å –∫–æ–º–∞–Ω–¥—ã <code>/start</code>')
    }
})

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–∞
bot.hears('üìú –ê—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç', async ctx => {
    try {
        // –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –∑–∞—Å—Ç–∞–≤–∏—Ç –±–æ—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ —Ç–æ–≤–∞—Ä–æ–≤ —Å –∫–æ—Ä–æ—Ç–∫–∏–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏ –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π
        await getAssortment(ctx, false)

    } catch (e) {
        console.log(e)
        ctx.replyWithHTML('–£–ø—Å. –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞—á–∞—Ç—å —Å –∫–æ–º–∞–Ω–¥—ã <code>/start</code>')
    }
})

// –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫—É "–ü–æ–¥—Ä–æ–±–Ω–µ–µ"
bot.action('detailed', async ctx => {
    try {
        // –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –∑–∞—Å—Ç–∞–≤–∏—Ç –±–æ—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ
        // —Ç–æ–≤–∞—Ä–∞ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º
        await getDetailedPage(ctx)
    } catch(e) {
        console.log(e)
        ctx.replyWithHTML('–£–ø—Å. –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞—á–∞—Ç—å —Å –∫–æ–º–∞–Ω–¥—ã <code>/start</code>')
    }
})

// –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É "<< –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥"
bot.action('exitBack', async ctx => {
    try {
        // –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –≤ —Ç–µ–ª–µ–≥—Ä–∞–º–µ –∫–∞–∂–¥–∞—è –∏–º–µ–µ—Ç —Å–≤–æ–π id. 
        // –í—Å–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ ctx.session.photoList.
        // –ß—Ç–æ–±—ã –∏—Ö —É–¥–∞–ª–∏—Ç—å, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–ª—É—á–∏—Ç—å –¥–ª–∏–Ω—É –º–∞—Å—Å–∏–≤–∞ ctx.session.photoList –∏ 
        // –ø—Ä–∏–±–∞–≤–∏—Ç—å 1 —Ç.–∫. –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π - —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.
        // –ü–æ—Å–ª–µ —á–µ–≥–æ —Ü–∏–∫–ª–æ–º for –º–æ–∂–Ω–æ —É–¥–∞–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ –∏—Ö id —Å —Å–∞–º–æ–≥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ.
        const delMessage = ctx.session.photoList.length + 1
        for (let i = 0; i < delMessage; i++) {
            await ctx.deleteMessage(ctx.callbackQuery.message.message_id-i)
        }

        // –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –∑–∞—Å—Ç–∞–≤–∏—Ç –±–æ—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ —Ç–æ–≤–∞—Ä–æ–≤ —Å –∫–æ—Ä–æ—Ç–∫–∏–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏ –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π
        await getAssortment(ctx, false)
    } catch(e) {
        console.log(e)
        console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥ exitBack')
    }
})

// –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É "<< –ù–∞–∑–∞–¥"
bot.action('prevPage', async ctx => {
    try {
        // –ò–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞: –µ—Å–ª–∏ —Ç–µ–∫—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ —Ä–∞–≤–Ω–∞ 1
        // —Ç–æ–≥–¥–∞ –æ—Ç–Ω–∏–º–∞–µ—Ç –æ—Ç —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã 1 –∏ –∏–∑–º–µ–Ω—è–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –±–æ—Ç–∞
        if (ctx.session.currentPage !== 1) {
            ctx.session.currentPage = ctx.session.currentPage - 1

            const data = await getAssortment(ctx, true)
            // –°–æ–æ–±—â–µ–Ω–∏—è —Å –æ–¥–Ω–æ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–µ–π, –∫—Ä–∞—Ç–∫–∏–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏ –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π –∏–∑–º–µ–Ω—è–µ—Ç—Å—è
            await ctx.editMessageMedia(
                data.photo, 
                {reply_markup: data.keyboard.reply_markup}
            )
        }
    } catch(e) {
        console.log(e)
        console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É')
    }
})

// –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É "–î–∞–ª—å—à–µ >>"
bot.action('nextPage', async ctx => {
    try {
        // –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –∏–¥–µ–Ω—Ç–∏—á–Ω–∞ prevPage, —Ç–æ–ª—å–∫–æ –∑–¥–µ—Å—å
        // —Ç–µ–∫—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 1
        if (ctx.session.currentPage !== ctx.session.itemsCount) {
            ctx.session.currentPage = ctx.session.currentPage + 1
            
            const data = await getAssortment(ctx, true)
            await ctx.editMessageMedia(
                data.photo, 
                {reply_markup: data.keyboard.reply_markup}
            )
        }
    } catch(e) {
        console.log(e)
        console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É')
    }
})

// –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–°–¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑"
bot.action('getOrder', ctx => {
    try {
        // –í—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è —Å —Å—Å—ã–ª–∫–æ–π –Ω–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –º–∞–≥–∞–∑–∏–Ω–∞
        ctx.replyWithHTML(
            '–î–ª—è –∑–∞–∫–∞–∑–∞ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–µ–≥–æ —Ç–æ–≤–∞—Ä–∞ –í—ã –º–æ–∂–µ—Ç–µ —Å–≤—è–∑–∞—Ç—å—Å—è —Å \n'+
            '<a href="http://t.me/arutemu_su">Arutemu</a>',
            {disable_web_page_preview: true}
        )
    } catch(e) {
        console.log(e)
    }
})

// –°—Ç–æ–∏—Ç –≤ —Å–∞–º–æ–º –∫–æ–Ω—Ü–µ, —á—Ç–æ–±—ã, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–µ–¥–µ—Ç –ª—é–±–æ–π —Ç–µ–∫—Å—Ç
// –Ω–µ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—é—â–∏–π —É—Å–ª–æ–≤–∏—è–º –≤—ã—à–µ, –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –µ–≥–æ –∏ –≤—ã–¥–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π –æ—Ç–≤–µ—Ç.
bot.on('text', ctx => {
    ctx.reply('–õ—É—á—à–µ –∑–∞–≥–ª—è–Ω–∏—Ç–µ –≤ –Ω–∞—à –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç')
})

bot.launch()
app.listen(3000, () => console.log('Server is running on port 3000'))

